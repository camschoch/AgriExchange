@using AgriExchange.Models
@using Microsoft.AspNet.Identity
@model AgriExchange.Models.BlogPost
@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@if (BlogPost.AllowedToPost(User.Identity.GetUserId().ToString()))
{
    using (Html.BeginForm())
    {
        @Html.ValidationSummary("", new {@class = "text-danger"})
        <div class="form-group">
            @Html.LabelFor(m => m.Title, new {@class = "col-md-2 control-label"})
            <div class="col-md-10">
                @Html.TextBoxFor(m => m.Title, new {@class = "form-control"})
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(m => m.Tags, new {@class = "col-md-2 control-label"})
            <div class="col-md-10">
                @Html.TextBoxFor(m => m.Tags, new {@class = "form-control"})
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(m => m.Text, new {@class = "col-md-2 control-label"})
            <div class="col-md-10">
                @Html.TextAreaFor(m => m.Text, new {@class = "form-control"})
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" class="btn btn-default" value="Submit"/>
            </div>
        </div>
    }
}
else
{
    <div class="jumbotron">
        <h1>You aren't allowed to post.</h1>
    </div>
}